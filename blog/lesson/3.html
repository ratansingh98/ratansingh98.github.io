<!DOCTYPE html>
<html>

<head>
  <title>Random Bytes to grayscale and BGR image</title>
  <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,minimum-scale=1">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300&amp;subset=latin-ext" rel="stylesheet" type="text/css">
  <link href="../css/bundle.css" rel="stylesheet" type="text/css">
  <link href="../css/blog-theme.css" rel="stylesheet" type="text/css">
  <link href="../css/blog-common.css" rel="stylesheet" type="text/css">
  <link href="../icons/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="shortcut-icon" href="/assets/icons/favicon.ico">
  <link rel="icon" href="../icons/logo.png"></head>

<body>
  <div data-blog-nav><nav class="blog-solid-nav"><div class="blog-solid-nav__inner"><a href="/index.html" class="blog-solid-nav__brand">Grandmaster.dev</a><a href="/about.html" class="blog-solid-nav__link">About</a><a href="/blog/index.html" class="blog-solid-nav__link is-active">Blog</a><a href="/contact.html" class="blog-solid-nav__link">Contact</a></div></nav></div>
  <div data-blog-banner></div>
  <section class="section-about">
    <div class="container">
      <h2>Converting between an image and raw bytes</h2>
      <p>Conceptually, a byte is an integer ranging from 0 to 255. In all real-time graphic
applications today, a pixel is typically represented by one byte per channel, though other
representations are also possible.</p>
<p>An OpenCV image is a 2D or 3D array of the .array type. An 8-bit grayscale image is a
2D array containing byte values. A 24-bit BGR image is a 3D array, which also contains
byte values. We may access these values by using an expression, such as image[0, 0] or
image[0, 0, 0]. The first index is the pixel’s y coordinate or row, 0 being the top. The
second index is the pixel’s x coordinate or column, 0 being the leftmost. The third index (if
applicable) represents a color channel.</p>
<p>For example, in an 8-bit grayscale image with a white pixel in the upper-left corner,
image[0, 0] is 255. For a 24-bit BGR image with a blue pixel in the upper-left corner,
image[0, 0] is [255, 0, 0].</p>
<p>As an <strong>alternative</strong> to using an expression, such as image[0, 0] or image[0, 0] = 128, we
may use an expression, such as image.item((0, 0)) or image.setitem((0, 0), 128).
The latter expressions are more efficient for single-pixel operations. However, as we will
see in subsequent chapters, we usually want to perform operations on large slices of an
image rather than on single pixels.</p>
<p>Provided that an image has 8 bits per channel, we can cast it to a standard Python
bytearray, which is one-dimensional:</p>
<p class="line"><code>byteArray = bytearray(image)</code></p>
<p>Conversely, provided that bytearray contains bytes in an appropriate order, we can cast
and then reshape it to get a numpy.array type that is an image:</p>
<p class="line">
  # Convert Gray Byte array to Gray image's dimension <br>
  <code>grayImage = numpy.array( grayByteArray).reshape(height, width) </code><br><br>
# Convert RBG Byte array to color image's dimension<br>
<code>bgrImage = numpy.array( bgrByteArray).reshape(height, width, 3)</code>
</p>
<p> Here 3 in reshape refers to 3rd dimension which contains color for that pixel.<p>
<p>As a more complete example, let’s convert bytearray, which contains random bytes to a
grayscale image and a BGR image:</p>
<p class="line">
  # Import Necessary libraries.<br>
  <code>import cv2</code><br>
  <code>import numpy</code><br>
  <code>import os</code><br><br>
  # Make an array of 120,000 random bytes.</code><br>
<code>  randomByteArray = bytearray(os.urandom(120000))</code><br>
  <code>flatNumpyArray = numpy.array(randomByteArray)</code><br><br>
  # Convert the array to make a 400x300 grayscale image.<br>
  <code>grayImage = flatNumpyArray.reshape(300, 400)</code><br>
  <code>cv2.imwrite('RandomGray.png', grayImage)</code><br><br>
  # Convert the array to make a 400x100 color image.<br>
  <code>bgrImage = flatNumpyArray.reshape(100, 400, 3</code>)<br>
  <code>cv2.imwrite('RandomColor.png', bgrImage)</code><br>
</p>
<p>After running this script, we should have a pair of randomly generated images,
RandomGray.png and RandomColor.png, in the script’s directory.</p>
<p>The output should look like this :</p>
<img src="../image/RandomColor.png" height="150px" width="200px"/>
<img src="../image/RandomGray.png" height="150px"/>
    </div>
    <div class="pagination ">
      <a class="toggler" href="2.html">Prev</a>
      <a  class="toggler" href="4.html">Next</a>
    </div>
  </section>
  <div data-blog-footer></div>
  <div class="google-rainbow">
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
  </div>
  <script src="../js/blog-layout.js"></script>
  <script src="../js/bundle.js"></script>
</body>

</html>
