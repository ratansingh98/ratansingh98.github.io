<!DOCTYPE html>
<html>

<head>
  <title>ORB For Object Detection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,minimum-scale=1">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300&amp;subset=latin-ext" rel="stylesheet" type="text/css">
  <link href="../css/bundle.css" rel="stylesheet" type="text/css">
  <link href="../css/blog-theme.css" rel="stylesheet" type="text/css">
  <link href="../css/blog-common.css" rel="stylesheet" type="text/css">
  <link href="../icons/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="shortcut-icon" href="/assets/icons/favicon.ico">
  <link rel="icon" href="../icons/logo.png"></head>

<body>
  <div data-blog-nav><nav class="blog-solid-nav"><div class="blog-solid-nav__inner"><a href="/index.html" class="blog-solid-nav__brand">Grandmaster.dev</a><a href="/about.html" class="blog-solid-nav__link">About</a><a href="/blog/index.html" class="blog-solid-nav__link is-active">Blog</a><a href="/contact.html" class="blog-solid-nav__link">Contact</a></div></nav></div>
  <div data-blog-banner></div>
  <section class="section-about">
    <div class="container">
      <h2>ORB For Object Detection</h2>
      <p>Here we will be looking at real time object detection using ORB and webcam.</p>
      <p>We will try to detect for below image :</p>
  <img src="../image/sample.jpg" height="250px"/>


<p class="line">
  #Import Necessary Libraries<br>
  <code>import cv2</code><br>
  <code>import numpy as np</code><br><br>

  # Create Instance for Video Capture<br>
  <code>cap = cv2.VideoCapture(0)</code><br>
  # Load Sample image which will be detected as grayscale<br>
  <code>image_template = cv2.imread('sample.jpg', 0)</code><br><br><br>

  # Define Function for ORB detection here new_image is image from webcam<br>
  <code>def ORB_detector(new_image, image_template):</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Convert new_image to grayscale<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>image1 = cv2.cvtColor(new_image, cv2.COLOR_BGR2GRAY)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Create orb detector for image with 1000 features and 1.2 Scale factor. Adjust params according to your need.<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>orb_detector = cv2.ORB_create(1000, 1.2)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Detect and compute orb featurs from image1<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>kp1, des1 = orb_detector.detectAndCompute( image1, None)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Detect and compute orb featurs from image_template<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>kp2, des2 = orb_detector.detectAndCompute( image_template, None)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Create 	Brute-force matcher instance.<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>bf = cv2.BFMatcher(cv2.NORM_HAMMING, crossCheck=True)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Find Matched between both detected feature.<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>matches = bf.match(des1, des2)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Sort them as oer their distance<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>matches = sorted(matches, key=lambda val: val.distance)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Return Length of matches<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>return len(matches)</code><br><br><br>

      # Loops until Enter key is pressed<br>
      <code>while True:</code><br>

      &nbsp;&nbsp;&nbsp;&nbsp;<code>ret, frame = cap.read()</code><br>

      &nbsp;&nbsp;&nbsp;&nbsp;# Get height and width of the frame<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>height, width = frame.shape[:2]</code><br>

      &nbsp;&nbsp;&nbsp;&nbsp;# Define the Box Dimensions<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>top_left_x = int(width / 3)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>top_left_y = int((height / 2) + (height / 4))</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>bottom_right_x = int((width / 3) * 2)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>bottom_right_y = int((height / 2) - (height / 4))</code><br>

      &nbsp;&nbsp;&nbsp;&nbsp;# Draw rectangular box for our region of interest<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>cv2.rectangle(frame, (top_left_x, top_left_y),
                    (bottom_right_x, bottom_right_y), (0, 255, 0), 3)</code><br>

      &nbsp;&nbsp;&nbsp;&nbsp;# Crop window of obeservation we defined above<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>cropped = frame[bottom_right_y: top_left_y, top_left_x:bottom_right_x]</code><br>

      &nbsp;&nbsp;&nbsp;&nbsp;<code>frame = cv2.flip(frame, 1)</code><br>

      &nbsp;&nbsp;&nbsp;&nbsp;# Get number of ORB matches<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>matches = ORB_detector(cropped, image_template)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# This will join number of matches with Threshold.<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>output_string = 'Threshold = ' + str(matches)</code><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# If matches is smaller than 80 then display Threshold.<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>if matches < 80:</code><br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>cv2.putText(frame, output_string, (50, 450),
                  cv2.FONT_HERSHEY_SIMPLEX, 2, (250, 0, 150), 2)</code><br><br>
      &nbsp;&nbsp;&nbsp;&nbsp;# Else display match is found.<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>else :</code><br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>cv2.putText(frame, "Match Found", (50, 450),
                  cv2.FONT_HERSHEY_SIMPLEX, 2, (250, 0, 150), 2)</code><br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;# Display frame named Object Detector ORB.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;<code>cv2.imshow('Object Detector ORB', frame)</code><br>
    &nbsp;&nbsp;&nbsp;&nbsp;# Exit out of the infinite loop by pressing Enter key.<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<code>if cv2.waitKey(1) == 13:</code><br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>break</code><br><br><br>
# Destroy Create Image and Terminate program.<br>
  <code>cv2.destroyAllWindows()</code><br>

</p>


<p><strong>Output Image will be: </strong></p>
<img src="../image/Undetected.png" height="250px"/>
<img src="../image/Detected.png" height="250px"/>
<br><br>

    </div>

    <div class="pagination ">
      <a class="toggler" href="18.html">Prev</a>
      <a  class="toggler" href="20.html">Next</a>
    </div>
  </section>
  <div data-blog-footer></div>
  <div class="google-rainbow">
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
  </div>
  <script src="../js/blog-layout.js"></script>
  <script src="../js/bundle.js"></script>
</body>

</html>
