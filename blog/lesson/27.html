<!DOCTYPE html>
<html>

<head>
  <title>Basic Motion Detection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,minimum-scale=1">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300&amp;subset=latin-ext" rel="stylesheet" type="text/css">
  <link href="../css/bundle.css" rel="stylesheet" type="text/css">
  <link href="../css/blog-theme.css" rel="stylesheet" type="text/css">
  <link href="../css/blog-common.css" rel="stylesheet" type="text/css">
  <link href="../icons/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="shortcut-icon" href="/assets/icons/favicon.ico">
  <link rel="icon" href="../icons/logo.png"></head>

<body>
  <div data-blog-nav><nav class="blog-solid-nav"><div class="blog-solid-nav__inner"><a href="/index.html" class="blog-solid-nav__brand">Grandmaster.dev</a><a href="/about.html" class="blog-solid-nav__link">About</a><a href="/blog/index.html" class="blog-solid-nav__link is-active">Blog</a><a href="/contact.html" class="blog-solid-nav__link">Contact</a></div></nav></div>
  <div data-blog-banner></div>
  <section class="section-about">
    <div class="container">
      <h2>Basic Motion Detection</h2>
      <p>The first and most intuitive solution is to calculate the differences between frames, or
between a frame considered “background” and all the other frames.</p>


<p> Let’s look at an example of this approach:</p>

<p class="line">
  # Import Neccessary libraries<br>
  <code>import cv2</code><br>
  <code>import numpy as np</code><br><br>
  # Create Video Capture Instance<br>
  <code>camera = cv2.VideoCapture(0)</code><br>
  # Create an array for ellipse of 9x4 dimension<br>
  <code>es = cv2.getStructuringElement( cv2.MORPH_ELLIPSE, (9,4))</code><br>
  # Create a 5x5 kernel of ones<br>
  <code>kernel = np.ones((5,5),np.uint8)</code><br>
  <code>background = None</code><br>
  # Infinite loop unless enter is pressed<br>
  <code>while (True):</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>ret, frame = camera.read()</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>if background is None:</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>background = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>background = cv2.GaussianBlur(background, (21, 21), 0)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>continue</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;# Convert into grayscale and apply GaussianBlur.<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>gray_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>gray_frame = cv2.GaussianBlur(gray_frame, (21, 21), 0)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;# Apply a threshold, so as to obtain a black and white image, and dilate the image so holes and imperfections get normalized.<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>diff = cv2.absdiff(background, gray_frame)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>diff = cv2.threshold(diff, 25, 255, cv2.THRESH_BINARY)[1]</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>diff = cv2.dilate(diff, es, iterations = 2)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;# Find contours<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>image, cnts, hierarchy = cv2.findContours(diff.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;# Loop though countours<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>for c in cnts:</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>if cv2.contourArea(c) < 1500:</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>continue</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>(x, y, w, h) = cv2.boundingRect(c)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 2)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;# Show Windowss<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>cv2.imshow("contours", frame)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>cv2.imshow("dif", diff)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;# Break loop when Enter is pressed<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>if cv2.waitKey(13):</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>break</code><br><br>
  # Destroy windows and remove camera Instance<br>
  <code>cv2.destroyAllWindows()</code><br>
  <code>camera.release()</code><br>
</p>
    </div>

    <div class="pagination ">
      <a class="toggler" href="26.html">Prev</a>
      <a  class="toggler" href="28.html">Next</a>
    </div>
  </section>
  <div data-blog-footer></div>
  <div class="google-rainbow">
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
    <div class="rainbow-item"></div>
  </div>
  <script src="../js/blog-layout.js"></script>
  <script src="../js/bundle.js"></script>
</body>

</html>
